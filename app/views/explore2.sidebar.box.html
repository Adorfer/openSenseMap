<div id="sidebar" style="background-position: 0px -5px;">
	<div>
		<div class="row">
			<div class="col-xs-12 col-md-12">
				<h3>
					<span ng-hide="editableMode">
						{{ selectedMarker.name }}
						<a ui-sref="explore.map"><i class="fa fa-times pull-right close" ng-click="closeSidebar()" tooltip="{{'CLOSESIDEBAR' | translate}}" tooltip-trigger tooltip-placement="bottom"></i></a>
					</span>
					<a ng-click="openEditDialog()">Edit me</a>
					<input ng-show="editableMode" class="form-control" type="text" name="" ng-model="tmpSensor.name">
				</h3>
			</div>
		</div>

		<div class="row" role="tabpanel">
			<!-- Nav tabs -->
			<ul class="nav nav-tabs nav-justified" role="tablist">
				<li role="presentation" class="active"><a href data-target="#tabMeasurements" aria-controls="tabMeasurements" role="tab" data-toggle="tab">{{ 'SIDEBAR_TAB_MEASUREMENTS' | translate }}</a></li>
				<li role="presentation"><a href data-target="#tabInfo" aria-controls="tabInfo" role="tab" data-toggle="tab">{{ 'SIDEBAR_TAB_INFO' | translate }}</a></li>
				<li role="presentation"><a href data-target="#tabManage" aria-controls="tabManage" role="tab" data-toggle="tab">{{ 'SIDEBAR_TAB_MANAGE' | translate }}</a></li>
			</ul>

			<!-- Tab panes -->
			<div class="tab-content">
				<div role="tabpanel" class="tab-pane active" id="tabMeasurements">
					<div class="list-group">
						<uib-accordion close-others="oneAtATime">
							<uib-accordion-group ng-click="getData(sensor);" ng-repeat="sensor in selectedMarkerData.sensors">
							<uib-accordion-heading>
							<span title="{{sensor.title | translate}}"><i class="fa fa-bar-chart fa-fw" ng-class="{'fa wi-thermometer fa-fw': (sensor.sensorType == 'BMP085' || sensor.sensorType == 'DHT11')  && sensor.title == 'Temperatur','fa wi-sprinkles fa-fw': sensor.sensorType == 'DHT11' || sensor.title == 'rel. Luftfeuchte' || sensor.title == 'Luftfeuchtigkeit','fa fa-volume-up fa-fw': sensor.sensorType == 'LM386','fa fa-tachometer fa-fw': sensor.sensorType == 'BMP085' && sensor.title == 'Luftdruck' ,'fa fa-lightbulb-o fa-fw': sensor.sensorType == 'GL5528' || sensor.sensorType == 'TSL2561','fa fa-google-wallet fa-fw': sensor.sensorType == 'GUVA-S12D'}"></i>
								{{sensor.lastMeasurement.value}} {{sensor.unit}}<span ng-if="sensor.lastMeasurement.createdAt">, {{'LAST_MEASUREMENT_FROM' | translate }} {{ sensor.lastMeasurement.createdAt | date : 'd/M/yy h:mm a' }}</span></span>
							</uib-accordion-heading>
							<div style="min-width: 100px; min-height: 100px;margin: 100 auto" >
								<highchart config="chartConfigs[sensor._id]" class="span10"></highchart>
							</div>
							</uib-accordion-group>
						</uib-accordion>
					</div> <!-- end .list-group -->
				</div> <!-- end #tabMeasurements pane -->

				<div role="tabpanel" class="tab-pane" id="tabInfo">
					<div flow-init="{ singleFile:true }" flow-file-added="added($file,$event)" flow-drop>
						<div class="thumbnail">
							<!--<img ng-src="/userimages/{{image}}" ng-hide="$flow.files.length && editableMode" alt="Image for {{ selectedMarker.name || 'Filter' }}">-->
							<!--<img id="image" flow-img="$flow.files[0]" ng-show="$flow.files.length && editableMode">-->
							<img id="image" ng-src="{{ selectedMarker.image || 'images/placeholder.png' }}" alt="Image for {{ selectedMarker.name }}">
						</div>
						<div ng-show="editableMode">
							<span class="btn btn-primary" flow-btn>{{ 'SETTINGS_SELECTIMAGE' | translate }}</span>
							<span class="btn btn-danger" ng-show="$flow.files.length" ng-click="$flow.cancel()">{{ 'REMOVE' | translate }}</span>
							<p ng-show="editableMode">{{ 'SETTINGS_IMAGE_RESTRICTIONS' | translate }}</p>
						</div>
					</div>
				</div> <!-- end tabInfo pange -->
				
				<div role="tabpanel" class="tab-pane" id="tabManage">
					<div class="row">
						<alert type="default">
							Um die Eigeschaften deiner SenseBox zu bearbeiten gib deinen <strong>SenseBox API-Key</strong> ein und klicke auf Bearbeiten:
							<form>
								<div class="form-group">
									<input name="apiKey" class="form-control" type="text" ng-model="apikey.key" placeholder="SenseBox ApiKey">
								</div>
								<div class="form-group">
									<button ng-show="!editableMode" ng-click="enableEditableMode()" class="btn btn-warning col-md-12"><i class="fa fa-pencil"></i>&nbsp; Bearbeiten</button>
									<button ng-show="editableMode" ng-click="saveChange()" class="btn btn-success col-md-6"><span class="glyphicon glyphicon-floppy-disk"></span>&nbsp; Speichern</button>
									<button ng-show="editableMode" ng-click="discardChanges()" class="btn btn-warning col-md-6"><i class="fa fa-times"></i>&nbsp; Abbrechen</button>
								</div>
							</form>
						</alert>
					</div>
					<div class="row" ng-show="editableMode">
						<alert type="info">
							Du kannst jetzt den Titel deiner Sensebox ändern und das Bild im Abschnitt "Information" ändern. Klicke im Anschluss auf <b>Speichern</b>.
						</alert>
					</div>
					<div class="row" ng-show="editableMode">
						<alert type="default">
							<form>
								<div class="form-group">
									<button ng-click="downloadArduino()" class="btn btn-warning form-control"><a id="downloadlink" href="" download="sensebox.ino"><i class="fa fa-download"></i>&nbsp; Sketch herunterladen</a></button>
								</div>
							</form>
						</alert>
					</div>
				</div>
			</div>
		</div>
	</div> 
</div> <!-- end #sidebar -->
